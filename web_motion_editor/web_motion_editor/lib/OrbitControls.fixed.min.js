THREE.OrbitControls=function(n,t){function st(){return Math.PI/1800*i.autoRotateSpeed}function at(){return Math.pow(.95,i.zoomSpeed)}function bt(n){if(i.enabled!==!1){if(n.preventDefault(),n.button===i.mouseButtons.ORBIT){if(i.noRotate===!0)return;u=r.ROTATE;l.set(n.clientX,n.clientY)}else if(n.button===i.mouseButtons.ZOOM){if(i.noZoom===!0)return;u=r.DOLLY;p.set(n.clientX,n.clientY)}else if(n.button===i.mouseButtons.PAN){if(i.noPan===!0)return;u=r.PAN;s.set(n.clientX,n.clientY)}u!==r.NONE&&(document.addEventListener("mousemove",vt,!1),document.addEventListener("mouseup",yt,!1),i.dispatchEvent(et))}}function vt(n){if(i.enabled!==!1){n.preventDefault();var t=i.domElement===document?i.domElement.body:i.domElement;if(u===r.ROTATE){if(i.noRotate===!0)return;a.set(n.clientX,n.clientY);v.subVectors(a,l);i.rotateLeft(2*Math.PI*v.x/t.clientWidth*i.rotateSpeed);i.rotateUp(2*Math.PI*v.y/t.clientHeight*i.rotateSpeed);l.copy(a)}else if(u===r.DOLLY){if(i.noZoom===!0)return;w.set(n.clientX,n.clientY);b.subVectors(w,p);b.y>0?i.dollyIn():b.y<0&&i.dollyOut();p.copy(w)}else if(u===r.PAN){if(i.noPan===!0)return;h.set(n.clientX,n.clientY);o.subVectors(h,s);i.pan(o.x,o.y);s.copy(h)}u!==r.NONE&&i.update()}}function yt(){i.enabled!==!1&&(document.removeEventListener("mousemove",vt,!1),document.removeEventListener("mouseup",yt,!1),i.dispatchEvent(ot),u=r.NONE)}function pt(n){if(i.enabled!==!1&&i.noZoom!==!0&&u===r.NONE){n.preventDefault();n.stopPropagation();var t=0;n.wheelDelta!==undefined?t=n.wheelDelta:n.detail!==undefined&&(t=-n.detail);t>0?i.dollyOut():t<0&&i.dollyIn();i.update();i.dispatchEvent(et);i.dispatchEvent(ot)}}function kt(n){if(i.enabled!==!1){switch(n.touches.length){case 1:if(i.noRotate===!0)return;u=r.TOUCH_ROTATE;l.set(n.touches[0].pageX,n.touches[0].pageY);break;case 2:if(i.noZoom===!1){u=r.TOUCH_DOLLY_AND_PAN;var t=n.touches[0].pageX-n.touches[1].pageX,f=n.touches[0].pageY-n.touches[1].pageY,e=Math.sqrt(t*t+f*f);p.set(0,e)}i.noPan===!1&&(u=r.TOUCH_DOLLY_AND_PAN,s.set(n.touches[0].pageX,n.touches[0].pageY),d.set(n.touches[1].pageX,n.touches[1].pageY));break;default:u=r.NONE}u!==r.NONE&&i.dispatchEvent(et)}}function dt(n){var t;if(i.enabled!==!1){n.preventDefault();n.stopPropagation();t=i.domElement===document?i.domElement.body:i.domElement;switch(n.touches.length){case 1:if(i.noRotate===!0)return;if(u!==r.TOUCH_ROTATE)return;a.set(n.touches[0].pageX,n.touches[0].pageY);v.subVectors(a,l);i.rotateLeft(2*Math.PI*v.x/t.clientWidth*i.rotateSpeed);i.rotateUp(2*Math.PI*v.y/t.clientHeight*i.rotateSpeed);l.copy(a);i.update();break;case 2:if(i.noPan===!1){if(u!==r.TOUCH_DOLLY_AND_PAN)return;if(h.set(n.touches[0].pageX,n.touches[0].pageY),g.set(n.touches[1].pageX,n.touches[1].pageY),o.subVectors(h,s),rt.subVectors(g,d),o.dot(rt)/(o.length()*rt.length())>Math.cos(Math.PI/3)){i.pan(o.x,o.y);s.copy(h);d.copy(g);i.update();break}s.copy(h);d.copy(g)}if(i.noZoom===!1){if(u!==r.TOUCH_DOLLY_AND_PAN)return;var f=n.touches[0].pageX-n.touches[1].pageX,e=n.touches[0].pageY-n.touches[1].pageY,c=Math.sqrt(f*f+e*e);w.set(0,c);b.subVectors(w,p);b.y>0?i.dollyOut():b.y<0&&i.dollyIn();p.copy(w);i.update();break}break;default:u=r.NONE}}}function gt(){i.enabled!==!1&&(i.dispatchEvent(ot),u=r.NONE)}this.object=n;this.domElement=t!==undefined?t:document;this.enabled=!0;this.target=new THREE.Vector3;this.center=this.target;this.noZoom=!1;this.zoomSpeed=1;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.noRotate=!1;this.rotateSpeed=1;this.noPan=!1;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=- Infinity;this.maxAzimuthAngle=Infinity;this.noKeys=!1;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};var i=this,k=1e-6,l=new THREE.Vector2,a=new THREE.Vector2,v=new THREE.Vector2,s=new THREE.Vector2,d=new THREE.Vector2,h=new THREE.Vector2,g=new THREE.Vector2,o=new THREE.Vector2,rt=new THREE.Vector2,y=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector2,w=new THREE.Vector2,b=new THREE.Vector2,c,e,ut=0,ft=0,nt=1,tt=new THREE.Vector3,ht=new THREE.Vector3,ct=new THREE.Quaternion,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5,TOUCH_DOLLY_AND_PAN:6},u=r.NONE;this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;var lt=(new THREE.Quaternion).setFromUnitVectors(n.up,new THREE.Vector3(0,1,0)),wt=lt.clone().inverse(),it={type:"change"},et={type:"start"},ot={type:"end"};this.rotateLeft=function(n){n===undefined&&(n=st());ft-=n};this.rotateUp=function(n){n===undefined&&(n=st());ut-=n};this.panLeft=function(n){var t=this.object.matrix.elements;y.set(t[0],t[1],t[2]);y.multiplyScalar(-n);tt.add(y)};this.panUp=function(n){var t=this.object.matrix.elements;y.set(t[4],t[5],t[6]);y.multiplyScalar(n);tt.add(y)};this.pan=function(n,t){var r=i.domElement===document?i.domElement.body:i.domElement;if(i.object instanceof THREE.PerspectiveCamera){var f=i.object.position,e=f.clone().sub(i.target),u=e.length();u*=Math.tan(i.object.fov/2*Math.PI/180);i.panLeft(2*n*u/r.clientHeight);i.panUp(2*t*u/r.clientHeight)}else i.object instanceof THREE.OrthographicCamera?(i.panLeft(n*(i.object.right-i.object.left)/r.clientWidth),i.panUp(t*(i.object.top-i.object.bottom)/r.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")};this.dollyIn=function(n){n===undefined&&(n=at());i.object instanceof THREE.PerspectiveCamera?nt/=n:i.object instanceof THREE.OrthographicCamera?(i.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*n)),i.object.updateProjectionMatrix(),i.dispatchEvent(it)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.dollyOut=function(n){n===undefined&&(n=at());i.object instanceof THREE.PerspectiveCamera?nt*=n:i.object instanceof THREE.OrthographicCamera?(i.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/n)),i.object.updateProjectionMatrix(),i.dispatchEvent(it)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")};this.update=function(){var t=this.object.position,n;f.copy(t).sub(this.target);f.applyQuaternion(lt);c=Math.atan2(f.x,f.z);e=Math.atan2(Math.sqrt(f.x*f.x+f.z*f.z),f.y);this.autoRotate&&u===r.NONE&&this.rotateLeft(st());c+=ft;e+=ut;c=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,c));e=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,e));e=Math.max(k,Math.min(Math.PI-k,e));n=f.length()*nt;n=Math.max(this.minDistance,Math.min(this.maxDistance,n));this.target.add(tt);f.x=n*Math.sin(e)*Math.sin(c);f.y=n*Math.cos(e);f.z=n*Math.sin(e)*Math.cos(c);f.applyQuaternion(wt);t.copy(this.target).add(f);this.object.lookAt(this.target);ft=0;ut=0;nt=1;tt.set(0,0,0);(ht.distanceToSquared(this.object.position)>k||8*(1-ct.dot(this.object.quaternion))>k)&&(this.dispatchEvent(it),ht.copy(this.object.position),ct.copy(this.object.quaternion))};this.reset=function(){u=r.NONE;this.target.copy(this.target0);this.object.position.copy(this.position0);this.object.zoom=this.zoom0;this.object.updateProjectionMatrix();this.dispatchEvent(it);this.update()};this.getPolarAngle=function(){return e};this.getAzimuthalAngle=function(){return c};this.domElement.addEventListener("contextmenu",function(n){n.preventDefault()},!1);this.domElement.addEventListener("mousedown",bt,!1);this.domElement.addEventListener("mousewheel",pt,!1);this.domElement.addEventListener("DOMMouseScroll",pt,!1);this.domElement.addEventListener("touchstart",kt,!1);this.domElement.addEventListener("touchend",gt,!1);this.domElement.addEventListener("touchmove",dt,!1);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;
//# sourceMappingURL=OrbitControls.fixed.min.js.map
