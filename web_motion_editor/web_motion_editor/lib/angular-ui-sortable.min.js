angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(n,t,i){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(r,u,f,e){function c(n,t){return t&&typeof t=="function"?function(){n.apply(this,arguments);t.apply(this,arguments)}:n}function l(n){var t=n.data("ui-sortable");return t&&typeof t=="object"&&t.widgetFullName==="ui-sortable"?t:null}function v(n,t){var i=n.sortable("option","helper");return i==="clone"||typeof i=="function"&&t.item.sortable.isCustomHelperUsed()}function w(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))}function b(n,t){for(var r,u=null,i=0;i<n.length;i++)if(r=n[i],r.element[0]===t[0]){u=r.scope;break}return u}function y(n,t){t.item.sortable._destroy()}var o,s={},p={"ui-floating":undefined},h={receive:null,remove:null,start:null,stop:null,update:null},a={helper:null};if(angular.extend(s,p,n,r.uiSortable),!angular.element.fn||!angular.element.fn.jquery){i.error("ui.sortable: jQuery should be included before AngularJS!");return}e?(r.$watch("ngModel.length",function(){t(function(){!l(u)||u.sortable("refresh")},0,!1)}),h.start=function(n,t){if(s["ui-floating"]==="auto"){var i=t.item.siblings(),r=l(angular.element(n.target));r.floating=w(i)}t.item.sortable={model:e.$modelValue[t.item.index()],index:t.item.index(),source:t.item.parent(),sourceModel:e.$modelValue,cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed,_destroy:function(){angular.forEach(t.item.sortable,function(n,i){t.item.sortable[i]=undefined})}}},h.activate=function(n,t){var i,f,s,e;o=u.contents();i=u.sortable("option","placeholder");i&&i.element&&typeof i.element=="function"&&(f=i.element(),f=angular.element(f),s=u.find('[class="'+f.attr("class")+'"]:not([ng-repeat], [data-ng-repeat])'),o=o.not(s));e=t.item.sortable._connectedSortables||[];e.push({element:u,scope:r});t.item.sortable._connectedSortables=e},h.update=function(n,t){var i,f;t.item.sortable.received||(t.item.sortable.dropindex=t.item.index(),i=t.item.parent(),t.item.sortable.droptarget=i,f=b(t.item.sortable._connectedSortables,i),t.item.sortable.droptargetModel=f.ngModel,u.sortable("cancel"));v(u,t)&&!t.item.sortable.received&&u.sortable("option","appendTo")==="parent"&&(o=o.not(o.last()));o.appendTo(u);t.item.sortable.received&&(o=null);t.item.sortable.received&&!t.item.sortable.isCanceled()&&r.$apply(function(){e.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},h.stop=function(n,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?r.$apply(function(){e.$modelValue.splice(t.item.sortable.dropindex,0,e.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||v(u,t)||o.appendTo(u);o=null},h.receive=function(n,t){t.item.sortable.received=!0},h.remove=function(n,t){"dropindex"in t.item.sortable||(u.sortable("cancel"),t.item.sortable.cancel());t.item.sortable.isCanceled()||r.$apply(function(){t.item.sortable.moved=e.$modelValue.splice(t.item.sortable.index,1)[0]})},a.helper=function(n){return n&&typeof n=="function"?function(t,i){var r=n.apply(this,arguments);return i.sortable._isCustomHelperUsed=i!==r,r}:n},r.$watch("uiSortable",function(n){var t=l(u);!t||angular.forEach(n,function(n,i){if(i in p){i==="ui-floating"&&(n===!1||n===!0)&&(t.floating=n);s[i]=n;return}h[i]?(i==="stop"&&(n=c(n,function(){r.$apply()}),n=c(n,y)),n=c(h[i],n)):a[i]&&(n=a[i](n));s[i]=n;u.sortable("option",i,n)})},!0),angular.forEach(h,function(n,t){s[t]=c(n,s[t]);t==="stop"&&(s[t]=c(s[t],y))})):i.info("ui.sortable: ngModel not provided!",u);u.sortable(s)}}}]);
//# sourceMappingURL=angular-ui-sortable.min.js.map
